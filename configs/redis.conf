# Redis Configuration for Article Chat System
# Optimized for caching with LRU eviction

# Memory Management - Set max memory limit
maxmemory 2gb

# LRU Eviction Policy
# allkeys-lru: Remove any key according to the LRU algorithm
# This is perfect for cache scenarios where we want automatic cleanup
maxmemory-policy allkeys-lru

# LRU Algorithm Precision
# Higher values use more CPU but are more precise
# 5 is the default and provides good balance
maxmemory-samples 5

# Persistence Settings for Cache
# We want to disable persistence for pure cache use
save ""
appendonly no

# Performance Optimizations
tcp-keepalive 300
timeout 0

# Memory Usage Optimizations
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-size -2
list-compress-depth 0
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# Network Optimizations
tcp-backlog 511
databases 16

# Logging
loglevel notice
syslog-enabled no

# Security (basic) - Disable protected mode for Docker container networking
protected-mode no
port 6379
bind 0.0.0.0

# Client Management
maxclients 10000

# Memory Reporting
# Enable memory usage reporting
# info memory command will show detailed memory usage
